(()=>{"use strict";var e={20:(e,t,a)=>{var s=a(609),i=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,a){var s,n={},d=null,l=null;for(s in void 0!==a&&(d=""+a),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(l=t.ref),t)r.call(t,s)&&!c.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:i,type:e,key:d,ref:l,props:n,_owner:o.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},609:e=>{e.exports=window.React},848:(e,t,a)=>{e.exports=a(20)}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=window.wp.i18n,i=window.wp.element,n=window.wp.components;var r=a(848);const o=()=>{const e=(0,s.__)("Easy Paidy payment setup","paidy-wc");return(0,r.jsx)(n.__experimentalHeading,{level:2,children:e})},c=({onClick:e})=>(0,r.jsx)(n.Button,{className:"paidy-setting-step1 paidy-button",onClick:()=>{window.location.href="/wp-admin/admin.php?page=wc-admin&path=%2Fpaidy-on-boarding"},children:(0,s.__)("Start easy Paidy payment setup","paidy-wc")}),d=()=>(0,r.jsxs)("div",{className:"paidy-completed-message",children:[(0,r.jsx)(n.__experimentalHeading,{level:3,children:(0,s.__)("Status: Under review","paidy-wc")}),(0,r.jsx)("p",{children:(0,s.__)("Thank you for your application. We will notify you of the results via email and dashboard.","paidy-wc")}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,s.__)("The review process may take up to 5 business days.","paidy-wc")}),(0,r.jsx)("li",{children:(0,s.__)("Inquiries regarding screening: sales@paidy.com","paidy-wc")})]})]}),l=window.wp.apiFetch;var p=a.n(l);const y=window.wp.notices,u=window.wp.data,m=()=>(0,r.jsxs)("div",{className:"paidy-rejected-message",children:[(0,r.jsx)(n.__experimentalHeading,{level:3,children:(0,s.__)("Status: The review was rejected","paidy-wc")}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:(0,s.__)("After careful and repeated review, we regret to inform you that we have decided to postpone the transaction at this time.","paidy-wc")}),(0,r.jsx)("li",{children:(0,s.__)("We sincerely apologize for not being able to meet your expectations.","paidy-wc")}),(0,r.jsx)("li",{children:(0,s.__)("Please understand that we cannot provide details about the content of the review.","paidy-wc")})]})]}),h=({onClick:e})=>{const[t,a]=(0,i.useState)();return(0,i.useEffect)((()=>{p()({path:"/wc/v3/payment_gateways/paidy"}).then((e=>{const t=e.settings?.environment?.value||e.settings?.environment||"";a(t)})).catch((e=>p()({path:"/wp/v2/settings"}))).then((e=>{if(e){const s=e.woocommerce_paidy_settings||{};t||a(s.environment||"")}})).catch((e=>{console.error("Settings API Error:",e)}))}),[]),"sandbox"===t?(0,r.jsx)("div",{className:"paidy-enabled-test-message",children:(0,s.__)("Now test mode","paidy-wc")}):(0,r.jsx)(n.Button,{className:"paidy-button test-button",onClick:e,children:(0,s.__)("Enable test mode","paidy-wc")})},v=()=>{const[e,t]=(0,i.useState)(!1),[a,o]=(0,i.useState)(),{createErrorNotice:c,createSuccessNotice:d}=(0,u.useDispatch)(y.store),l=window.paidyForWcSettings?.restUrl||"";(0,i.useEffect)((()=>{p()({path:"/wc/v3/payment_gateways/paidy"}).then((e=>{const t=e.settings?.environment?.value||e.settings?.environment||"";if(console.log("Current Environment:",t),o(t),"sandbox"===t||"live"===t){const e=document.getElementById("paidy-payment-settings");e?(e.style.display="block",console.log("CSS updated: #paidy-payment-settings display set to block")):console.warn("Element #paidy-payment-settings not found")}})).catch((e=>(console.error("Failed to fetch environment:",e),p()({path:"/wp/v2/settings"})))).then((e=>{if(e&&!a){const t=(e.woocommerce_paidy_settings||{}).environment||"";if(o(t),"sandbox"===t||"live"===t){const e=document.getElementById("paidy-payment-settings");e&&(e.style.display="block",console.log("CSS updated (fallback): #paidy-payment-settings display set to block"))}}})).catch((e=>{console.error("Failed to fetch settings:",e)}))}),[]);const m=()=>{p()({path:"/wc/v3/payment_gateways/paidy",method:"PUT",data:{enabled:!0,settings:{environment:"live"}}}).then((e=>{window.location.href="/wp-admin/admin.php?page=wc-settings&tab=checkout&section=paidy"})).catch((e=>{t(!1),c(e.message||(0,s.__)("Error enabling Paidy","paidy-wc"),{type:"snackbar",isDismissible:!0,autoDismiss:!1})}))};return"sandbox"===a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_,{}),(0,r.jsx)("div",{className:"paidy-enabled-button",children:(0,r.jsx)(n.Button,{className:"paidy-button production-button",onClick:m,disabled:e,children:(0,s.__)("Enable production mode","paidy-wc")})})]}):"live"===a?(0,r.jsx)(w,{}):(0,r.jsxs)("div",{className:"paidy-approved-message",children:[(0,r.jsx)(n.__experimentalHeading,{level:3,children:(0,s.__)("Status: The review approved","paidy-wc")}),(0,r.jsxs)("p",{children:[(0,s.__)("The review has been completed and the merchant agreement has been concluded.","paidy-wc"),(0,r.jsx)("br",{}),(0,s.__)("For terms of use, please check the terms and conditions notification email sent by Paidy Inc.","paidy-wc")]}),(0,r.jsxs)("ul",{className:"paidy-approved-list",children:[(0,r.jsx)("li",{children:(0,s.__)("We recommend setting the Webhook URL in the Paidy merchant management screen before publishing in production mode. Set the Webhook URL to the following value.","paidy-wc")}),(0,r.jsx)("li",{children:(0,s.__)("[Common for test and production]","paidy-wc")}),(0,r.jsxs)("li",{children:[l,"wp-json/paidy/v1/order/"]}),(0,r.jsx)("li",{children:(0,s.__)("Please refer to the manual for information on the Paidy merchant management screen.","paidy-wc")})]}),(0,r.jsxs)("div",{className:"paidy-enabled-button",children:[(0,r.jsx)("p",{children:(0,s.__)("Please click one of the buttons below.","paidy-wc")}),(0,r.jsx)(h,{onClick:()=>{p()({path:"/wc/v3/payment_gateways/paidy",method:"PUT",data:{enabled:!0,settings:{environment:"sandbox"}}}).then((e=>{d((0,s.__)("Settings saved.","paidy-wc")),window.location.href="/wp-admin/admin.php?page=wc-settings&tab=checkout&section=paidy"})).catch((e=>{t(!1),c(e.message||(0,s.__)("Error enabling Paidy","paidy-wc"),{type:"snackbar",isDismissible:!0,autoDismiss:!1})}))}}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(n.Button,{className:"paidy-button production-button",onClick:m,disabled:e,children:(0,s.__)("Enable production mode","paidy-wc")})]})]})},_=()=>(0,r.jsxs)("div",{className:"paidy-setting-sandbox-message",children:[(0,r.jsx)(n.__experimentalHeading,{level:3,children:(0,s.__)("Paidy test payments enabled","paidy-wc")}),(0,r.jsxs)("p",{children:[(0,s.__)("You can now test Paidy payments.","paidy-wc"),(0,r.jsx)("br",{}),(0,s.__)("Please check the test payment flow.","paidy-wc"),(0,r.jsx)("br",{}),(0,r.jsx)("a",{href:"https://paidy.com/docs/jp/testing.html",target:"_blank",children:(0,s.__)("Paidy test payment flow","paidy-wc")}),(0,r.jsx)("br",{}),(0,s.__)("After confirming the test payment, please switch to production mode.","paidy-wc")]})]}),w=()=>(0,r.jsx)("div",{className:"paidy-setting-completed-message",children:(0,r.jsx)(n.__experimentalHeading,{level:3,children:(0,s.__)("Paidy Payments is now live","paidy-wc")})}),g=()=>{const{currentStep:e}=(()=>{const[e,t]=(0,i.useState)(0),[a,n]=(0,i.useState)(),[r,o]=(0,i.useState)(),[c,d]=(0,i.useState)(),[l,m]=(0,i.useState)(),[h,v]=(0,i.useState)(),[_,w]=(0,i.useState)(),[g,b]=(0,i.useState)(),[S,x]=(0,i.useState)(),[f,j]=(0,i.useState)(),[C,k]=(0,i.useState)(),[N,P]=(0,i.useState)(),[R,E]=(0,i.useState)(),[D,T]=(0,i.useState)(),[F,L]=(0,i.useState)(""),[O,A]=(0,i.useState)(),[U,W]=(0,i.useState)(),[B,I]=(0,i.useState)(),[K,H]=(0,i.useState)(),[G,z]=(0,i.useState)(""),[V,q]=(0,i.useState)("yes"),[Y,$]=(0,i.useState)("yes"),{createErrorNotice:M,createSuccessNotice:J}=(0,u.useDispatch)(y.store);return(0,i.useEffect)((()=>{p()({path:"/wp/v2/settings"}).then((e=>{const a=e.woocommerce_paidy_on_boarding_settings;t(Number(a.currentStep||0)),n(a.storeName||""),o(a.siteName||""),d(a.storeUrl||""),m(a.registEmail||""),v(a.contactPhone||""),w(a.representativeLastName||""),b(a.representativeFirstName||""),x(a.representativeLastNameKana||""),j(a.representativeFirstNameKana||""),k(a.representativeDateOfBirth),P(a.annualGrossValue),E(a.averagePurchaseAmount),T(a.securitySurvey01RadioControl||""),L(a.securitySurvey01TextControl||""),A(a.securitySurvey11CheckControl),W(a.securitySurvey12CheckControl),I(a.securitySurvey13CheckControl),H(a.securitySurvey14CheckControl),z(a.securitySurvey10TextAreaControl||""),q(a.securitySurvey08RadioControl||"yes"),$(a.securitySurvey09RadioControl||"yes")}))}),[]),{currentStep:e,setCurrentStep:t,storeName:a,setStoreName:n,siteName:r,setSiteName:o,storeUrl:c,setStoreUrl:d,registEmail:l,setRegistEmail:m,contactPhone:h,setContactPhone:v,representativeLastName:_,setRepesentativeLastName:w,representativeFirstName:g,setRepresentativeFirstName:b,representativeLastNameKana:S,setRepresentativeLastNameKana:x,representativeFirstNameKana:f,setRepresentativeFirstNameKana:j,representativeDateOfBirth:C,setRepresentativeDateOfBirth:k,annualGrossValue:N,setAnnualGrossValue:P,averagePurchaseAmount:R,setAveragePurchaseAmount:E,securitySurvey01RadioControl:D,setSecuritySurvey01RadioControl:T,securitySurvey01TextControl:F,setSecuritySurvey01TextControl:L,securitySurvey11CheckControl:O,setSecuritySurvey11CheckControl:A,securitySurvey12CheckControl:U,setSecuritySurvey12CheckControl:W,securitySurvey13CheckControl:B,setSecuritySurvey13CheckControl:I,securitySurvey14CheckControl:K,setSecuritySurvey14CheckControl:H,securitySurvey10TextAreaControl:G,setSecuritySurvey10TextAreaControl:z,securitySurvey08RadioControl:V,setSecuritySurvey08RadioControl:q,securitySurvey09RadioControl:Y,setSecuritySurvey09RadioControl:$,saveSettings:()=>{let i=!1;[{value:a,label:(0,s.__)("Trade name / Store name","paidy-wc")},{value:r,label:(0,s.__)("Your EC site name","paidy-wc")},{value:c,label:(0,s.__)("Store URL","paidy-wc")},{value:l,label:(0,s.__)("Email address for registering Paidy","paidy-wc")},{value:h,label:(0,s.__)("Contact phone number","paidy-wc")},{value:_,label:(0,s.__)("Representative (last name)","paidy-wc")},{value:g,label:(0,s.__)("Representative (first name)","paidy-wc")},{value:S,label:(0,s.__)("Representative (last name kana)","paidy-wc")},{value:f,label:(0,s.__)("Representative (first name kana)","paidy-wc")},{value:C,label:(0,s.__)("Representative's date of birth (Gregorian calendar)","paidy-wc")}].forEach((e=>{e.value||(M(/* translators: %s: field label name */ /* translators: %s: field label name */
(0,s.sprintf)((0,s.__)("%s is a required field. Please enter it.","paidy-wc"),e.label),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),i=!0)}));let n=!1;const o=/^[ァ-ヶー]+$/;[{value:S,label:(0,s.__)("Representative (last name kana)","paidy-wc")},{value:f,label:(0,s.__)("Representative (first name kana)","paidy-wc")}].forEach((e=>{o.test(e.value)||(M(/* translators: %s: field label name */ /* translators: %s: field label name */
(0,s.sprintf)((0,s.__)("%s must be in full-width katakana. Please confirm.","paidy-wc"),e.label),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),n=!0)}));let d=!1;if("no"!==D||F?.trim()||(M((0,s.__)('When selecting "No" for the security survey question, please provide additional details in the text field.',"paidy-wc"),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),d=!0),!0===O||!0===U||!0===B||!0===K||G?.trim()||(M((0,s.__)("Since none of the security measures are implemented, please provide details about your security approach in the additional information field.","paidy-wc"),{type:"snackbar",isDismissible:!0,autoDismiss:!1}),d=!0),i)return void M((0,s.__)("Please fill in all the fields.","paidy-wc"),{type:"snackbar",isDismissible:!0,autoDismiss:!1});if(n||d)return;const y=e+1;t(y),p()({path:"/wp/v2/settings",method:"POST",data:{woocommerce_paidy_on_boarding_settings:{currentStep:y,storeName:a,siteName:r,storeUrl:c,registEmail:l,contactPhone:h,representativeLastName:_,representativeFirstName:g,representativeLastNameKana:S,representativeFirstNameKana:f,representativeDateOfBirth:C,annualGrossValue:N,averagePurchaseAmount:R,securitySurvey01RadioControl:D,securitySurvey01TextControl:F,securitySurvey11CheckControl:O,securitySurvey12CheckControl:U,securitySurvey13CheckControl:B,securitySurvey14CheckControl:K,securitySurvey10TextAreaControl:G,securitySurvey08RadioControl:V,securitySurvey09RadioControl:Y}}}).then((()=>{J((0,s.__)("Settings saved.","paidy-wc"))}))}}})(),t=window.paidyForWcSettings?.paidyAdUrl||"https://paidy.com/campaign/merchant/202404_WW",a=window.paidyForWcSettings?.nonWizardUrl||"/wp-admin/admin.php?page=wc-settings&tab=checkout&section=paidy&wizard=false";return 2===e?(0,r.jsxs)("div",{children:[(0,r.jsx)(o,{}),(0,r.jsx)(d,{})]}):3===e?(0,r.jsxs)("div",{children:[(0,r.jsx)(o,{}),(0,r.jsx)(v,{})]}):99===e?(0,r.jsxs)("div",{children:[(0,r.jsx)(o,{}),(0,r.jsx)(m,{})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{}),(0,r.jsxs)("div",{className:"paidy-on-boarding",children:[(0,r.jsx)("div",{className:"paidy-on-boarding__img",children:(0,r.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:(0,r.jsx)("img",{src:"/wp-content/plugins/paidy-wc/assets/images/paidy_logo_w800.png",alt:"Paidy"})})}),(0,r.jsxs)("div",{className:"paidy-on-boarding__content",children:[(0,r.jsx)("p",{children:(0,s.__)("Applying for and setting up Paidy is easy.","paidy-wc")}),(0,r.jsx)(c,{})]})]}),(0,r.jsxs)("div",{className:"paidy-on-boarding__description",children:[(0,r.jsxs)("p",{children:[(0,s.__)("There is no setup cost, payment fees start from 3.5%, and if you apply via this service, you will receive a one-month trial with no payment fees!","paidy-wc"),(0,r.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:(0,s.__)("Learn more about Paidy","paidy-wc")})]}),(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:a,rel:"noreferrer",children:(0,s.__)("Enter the information manually without using the wizard.","paidy-wc")})})]})]})};document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("paidy-admin-settings");e&&(0,i.createRoot)(e).render((0,r.jsx)(g,{}))}))})();